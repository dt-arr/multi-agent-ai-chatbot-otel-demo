{"version":19,"variables":[],"tiles":{"2":{"title":"Successful Interactions","type":"data","query":"fetch spans\n| search \"safety\"\n//| filter isNotNull(safety.blocked)\n//| fields query.text, agent.type, safety.passed_all_checks, interaction.successful, tone.professional, compliance.issues_detected, compliance.issues, safety.on_topic, accuracy.contains_correct_phone, safety.risk_level, safety.inappropriate_content, safety.pii_detected, retrieval.docs_found, safety.violation_type, retrieval.success\n| fields interaction.successful\n| summarize count = count(), by:{interaction.successful}\n\n\n| filter interaction.successful == true","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","isIconVisible":true,"prefixIcon":"SecurityResolvedIcon","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"count","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":1},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":""}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"3":{"title":"AI Vector Size","type":"data","query":"timeseries avg(llm.openai.embeddings.vector_size), by:{dt.entity.service}, filter:dt.entity.service==\"SERVICE-4B34518117769A8E\" \n//| summarize avg_vector_size = avg(llm.openai.embeddings.vector_size)\n//| fieldsAdd metricName = \"llm.openai.embeddings.vector_size\"\n| fieldsAdd arrayAvg(`avg(llm.openai.embeddings.vector_size)`)\n| fields `arrayAvg(\\`avg(llm.openai.embeddings.vector_size)\\`)`","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","isIconVisible":true,"prefixIcon":"AppsFunctionsSignetIcon","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"arrayAvg(`avg(llm.openai.embeddings.vector_size)`)","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-themed-blue-steel-color-03-default, #627cfe)"},"comparator":"≥","label":"","value":1},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":""}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"4":{"title":"LLM Model calls","type":"data","query":"fetch spans | filter traceloop.entity.name == \"call_model\" | summarize llm_calls = count(), avg_duration = avg(duration)","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","isIconVisible":true,"prefixIcon":"ChatIcon","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"llm_calls","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":1},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":"","value":1}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"10":{"title":"Recent conversations","type":"data","query":"fetch spans\n| filter isNotNull(gen_ai.completion.0.content)\n| filter gen_ai.completion.0.content != \"\\\"\\\"\"\n| fieldsAdd `Time`= end_time, `Prompt` = gen_ai.prompt.1.content, `Response` = gen_ai.completion.0.content\n| dedup trace.id\n| sort end_time desc\n| fields end_time, Prompt, Response, trace.id","visualization":"table","visualizationSettings":{"autoSelectVisualization":true,"table":{"rowDensity":"comfortable"}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"11":{"title":"Top Busy tasks","type":"data","query":"fetch spans\n| filter dt.openpipeline.source == \"/api/v2/otlp/v1/traces\"\n| sort end_time desc\n\n| summarize count = count(), by:{traceloop.entity.name}\n| sort count desc","visualization":"categoricalBarChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"12":{"title":"Gen AI - Client Operation Duration","type":"data","query":"timeseries avg(`gen_ai.client.operation.duration`), by:{`dt.entity.service`}, filter:`dt.entity.service`==\"SERVICE-4B34518117769A8E\" | fieldsAdd metricName = \"gen_ai.client.operation.duration\"","visualization":"lineChart","visualizationSettings":{"chartSettings":{"legend":{"position":"bottom"}},"autoSelectVisualization":false,"thresholds":[]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"timeframe":{"tileTimeframeEnabled":true,"tileTimeframe":{"from":"2025-09-10T11:14:16.254Z","to":"2025-09-10T11:54:18.459Z"}}},"16":{"title":"Gen AI - Errors in the code","type":"data","query":"fetch spans//, timeframe: \"2025-09-10T06:14:52.130Z/2025-09-10T12:14:52.131Z\", samplingRatio: 1, scanLimitGBytes: 500\n\n// based on the applied filters\n| filter matchesValue(`dt.entity.service`, \"SERVICE-4B34518117769A8E\")\n\n// calculate raw multiplicity based on sampling\n| fieldsAdd multiplicity = coalesce(sampling.multiplicity, 1) * coalesce(aggregation.count, 1) * dt.system.sampling_ratio\n\n// construct fields\n| fieldsAdd span.status_code = if((span.status_code == \"error\" OR span.is_exit_by_exception), \"Error\", else: \"Ok\")\n| fields end_time, span.status_code, duration\n// removing spans with invalid durations\n| filter duration > 0ns\n\n/*| fieldsAdd bucket = round(log(toLong(duration)), decimals: 1)\n\n| summarize { count = sum(if(span.status_code == \"Ok\", `multiplicity`, else: 0)), failed = sum(if(span.status_code == \"Error\", `multiplicity`, else: 0)) }, by: { bucket, dt.system.sampling_ratio }","visualization":"areaChart","visualizationSettings":{"autoSelectVisualization":false,"chartSettings":{"seriesOverrides":[{"seriesId":["Ok"],"override":{"color":{"Default":"var(--dt-colors-charts-apdex-good-default, #1c520a)"}}},{"seriesId":["Error"],"override":{"color":{"Default":"var(--dt-colors-charts-apdex-unacceptable-default, #cd3741)"}}}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"segments":{"tileSegments":[],"tileSegmentsEnabled":true}},"19":{"title":"Top Error entity in GenAI App","type":"data","query":"fetch spans\n\n// based on the applied filters\n| filter matchesValue(`dt.entity.service`, \"SERVICE-4B34518117769A8E\")\n\n// calculate raw multiplicity based on sampling\n| fieldsAdd multiplicity = coalesce(sampling.multiplicity, 1) * coalesce(aggregation.count, 1) * dt.system.sampling_ratio\n\n// construct fields\n| fieldsAdd span.status_code = if((span.status_code == \"error\" OR span.is_exit_by_exception), \"Error\", else: \"Ok\")\n//| fields end_time, span.status_code, duration\n// removing spans with invalid durations\n| filter duration > 0ns\n| filter span.status_code == \"Error\" \n| summarize count = count(), by:{traceloop.entity.name}\n| sort count desc","visualization":"categoricalBarChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"20":{"title":"LLM Model calls - avg duration","type":"data","query":"fetch spans | filter traceloop.entity.name == \"call_model\" | summarize llm_calls = count(), avg_duration = avg(duration)","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","isIconVisible":true,"prefixIcon":"ClockIcon","colorThresholdTarget":"background","recordField":"avg_duration"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"avg_duration","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":1},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":"","value":1}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"22":{"title":"Top Exceptions","type":"data","query":"fetch spans\n| filter service.name == \"SuncorpAIAgent\"\n\n| expand span.events\n| fieldsAdd exception.type = span.events[exception.type]\n| fieldsAdd exception.escaped = span.events[exception.escaped]\n| fieldsAdd exception.type\n| summarize count = count(), by:{exception.type}\n| sort count desc","visualization":"categoricalBarChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"23":{"title":"Gen AI Request Model","type":"data","query":"fetch spans\n| filter isNotNull(gen_ai.request.model)\n| fields gen_ai.request.model, traceloop.workflow.name, llm.request.type,gen_ai.completion.0.content, traceloop.association.properties.ls_provider,gen_ai.response.model,gen_ai.system\n| summarize count = count(), by:{gen_ai.request.model}\n| sort count asc","visualization":"pieChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"24":{"title":"LLM Request Type","type":"data","query":"fetch spans\n| filter isNotNull(gen_ai.request.model)\n| fields gen_ai.request.model, traceloop.workflow.name, llm.request.type,gen_ai.completion.0.content, traceloop.association.properties.ls_provider,gen_ai.response.model,gen_ai.system\n| summarize count = count(), by:{llm.request.type}","visualization":"pieChart","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"25":{"title":"","type":"data","query":"fetch spans\n| filter isNotNull(gen_ai.request.model)\n| fields gen_ai.request.model, traceloop.workflow.name, llm.request.type,gen_ai.completion.0.content, traceloop.association.properties.ls_provider,gen_ai.response.model,gen_ai.system\n ","visualization":"table","visualizationSettings":{"autoSelectVisualization":false},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"26":{"title":"Total Tokens","type":"data","query":"fetch spans\n| filter isNotNull(llm.usage.total_tokens)\n | fields trace.id, llm.headers, llm.is_streaming, llm.request.type,  llm.usage.total_tokens, gen_ai.system, gen_ai.request.model, gen_ai.response.model\n| summarize totalTokens = sum(llm.usage.total_tokens), by:{gen_ai.request.model,gen_ai.response.model, gen_ai.system}\n| fields totalTokens","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"totalTokens","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-apdex-poor-default, #d56b1a)"},"comparator":"≥","label":"","value":1000},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":""}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"27":{"title":"Slowest response","type":"data","query":"fetch spans\n | filter service.name == \"SuncorpAIAgent\"\n | fields duration\n | sort duration desc\n | limit 1","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","recordField":"duration","isIconVisible":true,"prefixIcon":"ClockIcon","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"duration","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":0},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":"","value":1},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":"","value":0}]}],"unitsOverrides":[{"identifier":"duration","unitCategory":"time","baseUnit":"nanosecond","displayUnit":"second","decimals":2,"suffix":"","delimiter":false,"added":1757598039976}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"28":{"title":"Unanswered Prompt counts","type":"data","query":"fetch spans\n| filter  isNotNull(gen_ai.request.model)\n| fields gen_ai.completion.0.content\n| filter matchesPhrase(gen_ai.completion.0.content, \"unable to\") \nor matchesPhrase(gen_ai.completion.0.content,\"cannot\") \nor matchesPhrase(gen_ai.completion.0.content,\"sorry\")\n| summarize count = count() ","visualization":"singleValue","visualizationSettings":{"singleValue":{"labelMode":"none","isIconVisible":true,"prefixIcon":"BlockIcon","colorThresholdTarget":"background"},"autoSelectVisualization":false,"thresholds":[{"id":1,"field":"count","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-status-ideal-default, #2f6862)"},"comparator":"≥","label":"","value":1},{"id":1,"color":{"Default":"var(--dt-colors-charts-status-warning-default, #eea53c)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-status-critical-default, #c62239)"},"comparator":"≥","label":""}]}]},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}},"29":{"title":"On Topic - Insurance Focused","type":"data","query":"fetch spans\n| search \"safety\"\n//| filter isNotNull(safety.blocked)\n| fields end_time, query.text, agent.type,trace.id, safety.passed_all_checks, interaction.successful, tone.professional, compliance.issues_detected, compliance.issues, safety.on_topic, accuracy.contains_correct_phone, safety.risk_level, safety.inappropriate_content, safety.pii_detected, retrieval.docs_found, safety.violation_type, retrieval.success\n| sort end_time desc\n| filterOut safety.violation_type == \"off_topic\" \n| filterOut safety.risk_level == \"critical\"\n","visualization":"table","visualizationSettings":{"autoSelectVisualization":false,"table":{"rowDensity":"comfortable","sortBy":[{"columnId":"[\"safety.passed_all_checks\"]","direction":"ascending"}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"davis":{"enabled":false,"davisVisualization":{"isAvailable":true}}}},"layouts":{"2":{"x":3,"y":0,"w":3,"h":3},"3":{"x":19,"y":0,"w":4,"h":3},"4":{"x":0,"y":0,"w":3,"h":3},"10":{"x":0,"y":26,"w":20,"h":8},"11":{"x":0,"y":3,"w":10,"h":8},"12":{"x":5,"y":11,"w":5,"h":6},"16":{"x":0,"y":11,"w":5,"h":6},"19":{"x":10,"y":3,"w":6,"h":8},"20":{"x":15,"y":0,"w":4,"h":3},"22":{"x":16,"y":3,"w":8,"h":8},"23":{"x":10,"y":11,"w":6,"h":6},"24":{"x":16,"y":11,"w":8,"h":6},"25":{"x":0,"y":34,"w":20,"h":6},"26":{"x":9,"y":0,"w":3,"h":3},"27":{"x":12,"y":0,"w":3,"h":3},"28":{"x":6,"y":0,"w":3,"h":3},"29":{"x":0,"y":17,"w":21,"h":9}},"importedWithCode":false,"settings":{}}